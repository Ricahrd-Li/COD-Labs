# 多周期CPU中遇到的坑点
## 具体：
1. i类寄存器指令： 写回寄存器的时候，RegDst 应该是0 （一开始由于R类指令写回寄存器时RegDst为1，误以为可以共用一个写回状态7）
2. PCWrite=(zf & PCWriteCondition) | PCWrite 只适用于 beq 指令，不适用于bne指令
3. ALUOut[9:2]接Memory Read Address, 而不是ALUOut[7:0]
4. Mux中signal=0时选b而不是a，应该写成： c=(~signal)?a:b或c=(signal)?b:a；
5. PC与state不要忘了rst初始化，不然没法开始
6. 一个很大的问题是时钟周期快一个或者慢一个的问题：
我的解决方案是：一. 把ALU改成了组合逻辑而不是时序逻辑; 二. 对control FSM的修改：由现态触发改成了次态触发
7. 犯了两三个线连错（连反PCWrite与另一个线），control FSM里面信号0，1搞反的错误
8. Debug总结：
一. 仿真很好用，Debug还是要用仿真。
二. 仿真中，rst波形长度有讲究，太短了会出问题，最好延续多个时钟周期。
三. 仿真中，下一个时钟周期的输入与上一个时钟周期波形的末尾的关系？ 
## 方法论：
1. 做事情之前，脑子里面想清楚才能动手，**弄懂原理**永远最重要。
2. 不会就及时问助教，有时自己琢磨效果不好，不要shy
